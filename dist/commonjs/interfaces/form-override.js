"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var aurelia_logging_1 = require("aurelia-logging");
var overrideMarker = "$";
function isOverride(key) {
    var val = key.charAt(0) === overrideMarker;
    aurelia_logging_1.getLogger("aurelia-json-schema-form")
        .info("isOverride", { key: key, val: val });
    return val;
}
exports.isOverride = isOverride;
function setFormOverrides(form, parentSchema, formKey, schema) {
    aurelia_logging_1.getLogger("aurelia-json-schema-form")
        .info("setFormOverrides", { form: form, parentSchema: parentSchema, formKey: formKey, schema: schema });
    schema.title = schema.title || (!!formKey ? fromCamelCase(formKey) : undefined);
    form.$schema = schema;
    if (parentSchema && parentSchema.type === "object") {
        form.$required = form.$required || (parentSchema.required
            ? parentSchema.required.indexOf(formKey) > -1 : false);
    }
}
exports.setFormOverrides = setFormOverrides;
function fromCamelCase(val) {
    return val
        .replace(/([A-Z])/g, " $1")
        .replace(/^./, function (str) { return str.toUpperCase(); });
}
var templateModuleMarker = "_element";
function isTemplateModule(key) {
    return key === templateModuleMarker;
}
exports.isTemplateModule = isTemplateModule;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImludGVyZmFjZXMvZm9ybS1vdmVycmlkZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUlBLG1EQUE0QztBQXVCNUMsSUFBTSxjQUFjLEdBQVcsR0FBRyxDQUFDO0FBQ25DLG9CQUEyQixHQUFXO0lBQ3BDLElBQU0sR0FBRyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssY0FBYyxDQUFDO0lBRTdDLDJCQUFTLENBQUMsMEJBQTBCLENBQUM7U0FDbEMsSUFBSSxDQUFDLFlBQVksRUFBRSxFQUFFLEdBQUcsS0FBQSxFQUFFLEdBQUcsS0FBQSxFQUFFLENBQUMsQ0FBQztJQUNwQyxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFORCxnQ0FNQztBQUVELDBCQUNFLElBQW1CLEVBQUUsWUFBbUMsRUFBRSxPQUFlLEVBQUUsTUFBNkI7SUFFeEcsMkJBQVMsQ0FBQywwQkFBMEIsQ0FBQztTQUNsQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsRUFBRSxJQUFJLE1BQUEsRUFBRSxZQUFZLGNBQUEsRUFBRSxPQUFPLFNBQUEsRUFBRSxNQUFNLFFBQUEsRUFBRSxDQUFDLENBQUM7SUFDckUsTUFBTSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNoRixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztJQUV0QixJQUFJLFlBQVksSUFBSSxZQUFZLENBQUMsSUFBSSxLQUFLLFFBQVEsRUFBRTtRQUNsRCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUTtZQUN2RCxDQUFDLENBQUUsWUFBNEMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUMzRjtBQUNILENBQUM7QUFaRCw0Q0FZQztBQUVELHVCQUF1QixHQUFXO0lBQ2hDLE9BQU8sR0FBRztTQUNQLE9BQU8sQ0FBQyxVQUFVLEVBQUUsS0FBSyxDQUFDO1NBQzFCLE9BQU8sQ0FBQyxJQUFJLEVBQUUsVUFBQyxHQUFHLElBQUssT0FBQSxHQUFHLENBQUMsV0FBVyxFQUFFLEVBQWpCLENBQWlCLENBQUMsQ0FBQztBQUMvQyxDQUFDO0FBbUJELElBQU0sb0JBQW9CLEdBQVcsVUFBVSxDQUFDO0FBRWhELDBCQUFpQyxHQUFXO0lBQzFDLE9BQU8sR0FBRyxLQUFLLG9CQUFvQixDQUFDO0FBQ3RDLENBQUM7QUFGRCw0Q0FFQyIsImZpbGUiOiJpbnRlcmZhY2VzL2Zvcm0tb3ZlcnJpZGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBJSnNvblNjaGVtYURlZmluaXRpb24sXG4gIElKc29uU2NoZW1hT2JqZWN0RGVmaW5pdGlvblxufSBmcm9tIFwiLi9qc29uLXNjaGVtYS1kZWZpbml0aW9uXCI7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tIFwiYXVyZWxpYS1sb2dnaW5nXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUZvcm1PdmVycmlkZSB7XG4gIFtrZXk6IHN0cmluZ106IElGb3JtT3ZlcnJpZGVbXSB8IElGb3JtT3ZlcnJpZGUgfCBudW1iZXIgfCBib29sZWFuIHwgc3RyaW5nIHwgSUpzb25TY2hlbWFEZWZpbml0aW9uIHwgSVRlbXBsYXRlRWxlbWVudDtcbiAgX2VsZW1lbnQ/OiBJVGVtcGxhdGVFbGVtZW50O1xuICAkbm9UaXRsZT86IGJvb2xlYW47XG4gICRhcnJheUl0ZW0/OiBJRm9ybU92ZXJyaWRlO1xuICAkbm9FbXB0eUFycmF5SW5pdGlhbGl6YXRpb24/OiBib29sZWFuO1xuICAkbm90UmVtb3ZhYmxlPzogYm9vbGVhbjtcbiAgJGFycmF5QXNUYWJzPzogYm9vbGVhbjtcbiAgJHRhYlRpdGxlPzogc3RyaW5nO1xuICAkcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gICRodG1sQ2xhc3M/OiBzdHJpbmc7XG4gICRhbHRUZW1wbGF0ZT86IHN0cmluZztcbiAgJG1pbkRhdGU/OiBzdHJpbmc7IC8vIHl5eXktTU0tZGRcbiAgJG1heERhdGU/OiBzdHJpbmc7IC8vIHl5eXktTU0tZGRcbiAgJHNjaGVtYT86IElKc29uU2NoZW1hRGVmaW5pdGlvbjtcbiAgJHJlcXVpcmVkPzogYm9vbGVhbjtcbiAgJG5vU2VwYXJhdG9yPzogYm9vbGVhbjtcbiAgJHN0ZXA/OiBudW1iZXI7IC8vIHJhbmdlIHNsaWRlciBzdGVwc1xuICAkcGFyZW50Rm9ybT86IElGb3JtT3ZlcnJpZGU7XG59XG5cbmNvbnN0IG92ZXJyaWRlTWFya2VyOiBzdHJpbmcgPSBcIiRcIjtcbmV4cG9ydCBmdW5jdGlvbiBpc092ZXJyaWRlKGtleTogc3RyaW5nKSB7XG4gIGNvbnN0IHZhbCA9IGtleS5jaGFyQXQoMCkgPT09IG92ZXJyaWRlTWFya2VyO1xuXG4gIGdldExvZ2dlcihcImF1cmVsaWEtanNvbi1zY2hlbWEtZm9ybVwiKVxuICAgIC5pbmZvKFwiaXNPdmVycmlkZVwiLCB7IGtleSwgdmFsIH0pO1xuICByZXR1cm4gdmFsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0Rm9ybU92ZXJyaWRlcyhcbiAgZm9ybTogSUZvcm1PdmVycmlkZSwgcGFyZW50U2NoZW1hOiBJSnNvblNjaGVtYURlZmluaXRpb24sIGZvcm1LZXk6IHN0cmluZywgc2NoZW1hOiBJSnNvblNjaGVtYURlZmluaXRpb25cbikge1xuICBnZXRMb2dnZXIoXCJhdXJlbGlhLWpzb24tc2NoZW1hLWZvcm1cIilcbiAgICAuaW5mbyhcInNldEZvcm1PdmVycmlkZXNcIiwgeyBmb3JtLCBwYXJlbnRTY2hlbWEsIGZvcm1LZXksIHNjaGVtYSB9KTtcbiAgc2NoZW1hLnRpdGxlID0gc2NoZW1hLnRpdGxlIHx8ICghIWZvcm1LZXkgPyBmcm9tQ2FtZWxDYXNlKGZvcm1LZXkpIDogdW5kZWZpbmVkKTtcbiAgZm9ybS4kc2NoZW1hID0gc2NoZW1hO1xuXG4gIGlmIChwYXJlbnRTY2hlbWEgJiYgcGFyZW50U2NoZW1hLnR5cGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICBmb3JtLiRyZXF1aXJlZCA9IGZvcm0uJHJlcXVpcmVkIHx8IChwYXJlbnRTY2hlbWEucmVxdWlyZWRcbiAgICAgID8gKHBhcmVudFNjaGVtYSBhcyBJSnNvblNjaGVtYU9iamVjdERlZmluaXRpb24pLnJlcXVpcmVkLmluZGV4T2YoZm9ybUtleSkgPiAtMSA6IGZhbHNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmcm9tQ2FtZWxDYXNlKHZhbDogc3RyaW5nKSB7XG4gIHJldHVybiB2YWxcbiAgICAucmVwbGFjZSgvKFtBLVpdKS9nLCBcIiAkMVwiKVxuICAgIC5yZXBsYWNlKC9eLi8sIChzdHIpID0+IHN0ci50b1VwcGVyQ2FzZSgpKTtcbn1cblxuLyoqIFVzZWQgdG8gZGVjbGFyZSBhIGNvbXBsZXRlbHkgc2VwYXJhdGUgbW9kdWxlIHRoYXQgZG9lc1xuICogbm90IHBlcmZvcm0gc3RhbmRhcmQgdmFsaWRhdGlvbiwgaW1wbGVtZW50IHZpZXcvdmlldy1tb2RlbCBob3dldmVyIHlvdSB3YW50LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIElUZW1wbGF0ZUVsZW1lbnQge1xuXG4gIC8qKiBAcHJvcGVydHkgdGhlIGVsZW1lbnQgdG8gYXBwZW5kIHRvIHRlbXBsYXRlLCBtYWtlIHN1cmUgeW91IGhhdmUgYWRkZWQgaXQncyBtb2R1bGVOYW1lIHRvIGdsb2JhbFJlc291cmNlcyAqL1xuICBlbGVtZW50TmFtZTogc3RyaW5nO1xuXG4gIC8qKiB0aGUgc2NoZW1hJ3Mga2V5IHRvIHBhcnNlLCBiaW5kcyBmb3JtICh0by12aWV3KSBhbmQgbW9kZWwodHdvLXdheSkgdG8geW91ciBtb2R1bGVcbiAgICogQHByb3BlcnR5IElmIHNjaGVtYUtleSBpcyBzcGVjaWZpZWQsIHlvdXIgbW9kdWxlIG11c3QgaGF2ZTpcbiAgICogICBiaW5kYWJsZSBzY2hlbWE6IElKc29uU2NoZW1hRGVmaW5pdGlvbjtcbiAgICogICBiaW5kYWJsZSBtb2RlbDogYW55IG9yIG1vZGVsIHR5cGU7XG4gICAqICAgSWYgc2NoZW1hS2V5IGlzIG9tbWl0dGVkLCBubyBiaW5kaW5ncyBhcmUgbWFkZVxuICAgKi9cbiAgc2NoZW1hS2V5Pzogc3RyaW5nO1xufVxuXG5jb25zdCB0ZW1wbGF0ZU1vZHVsZU1hcmtlcjogc3RyaW5nID0gXCJfZWxlbWVudFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNUZW1wbGF0ZU1vZHVsZShrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4ga2V5ID09PSB0ZW1wbGF0ZU1vZHVsZU1hcmtlcjtcbn1cbiJdLCJzb3VyY2VSb290Ijoic3JjIn0=
