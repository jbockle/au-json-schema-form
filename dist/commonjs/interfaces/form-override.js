"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var aurelia_logging_1 = require("aurelia-logging");
var overrideMarker = "$";
function isOverride(key) {
    var val = key.charAt(0) === overrideMarker;
    aurelia_logging_1.getLogger("aurelia-json-schema-form")
        .info("isOverride", { key: key, val: val });
    return val;
}
exports.isOverride = isOverride;
function setFormOverrides(form, parentSchema, formKey, schema) {
    aurelia_logging_1.getLogger("aurelia-json-schema-form")
        .info("setFormOverrides", { form: form, parentSchema: parentSchema, formKey: formKey, schema: schema });
    schema.title = schema.title || (!!formKey ? fromCamelCase(formKey) : undefined);
    form.$schema = schema;
    if (parentSchema && parentSchema.type === "object") {
        form.$required = form.$required || (parentSchema.required
            ? parentSchema.required.indexOf(formKey) > -1 : false);
    }
}
exports.setFormOverrides = setFormOverrides;
function fromCamelCase(val) {
    return val
        .replace(/([A-Z])/g, " $1")
        .replace(/^./, function (str) { return str.toUpperCase(); });
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImludGVyZmFjZXMvZm9ybS1vdmVycmlkZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUtBLG1EQUE0QztBQW1CNUMsSUFBTSxjQUFjLEdBQVcsR0FBRyxDQUFDO0FBQ25DLG9CQUEyQixHQUFXO0lBQ3BDLElBQU0sR0FBRyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssY0FBYyxDQUFDO0lBRTdDLDJCQUFTLENBQUMsMEJBQTBCLENBQUM7U0FDbEMsSUFBSSxDQUFDLFlBQVksRUFBRSxFQUFFLEdBQUcsS0FBQSxFQUFFLEdBQUcsS0FBQSxFQUFFLENBQUMsQ0FBQztJQUNwQyxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFORCxnQ0FNQztBQUVELDBCQUNFLElBQW1CLEVBQUUsWUFBbUMsRUFBRSxPQUFlLEVBQUUsTUFBNkI7SUFFeEcsMkJBQVMsQ0FBQywwQkFBMEIsQ0FBQztTQUNsQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsRUFBRSxJQUFJLE1BQUEsRUFBRSxZQUFZLGNBQUEsRUFBRSxPQUFPLFNBQUEsRUFBRSxNQUFNLFFBQUEsRUFBRSxDQUFDLENBQUM7SUFDckUsTUFBTSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNoRixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztJQUV0QixJQUFJLFlBQVksSUFBSSxZQUFZLENBQUMsSUFBSSxLQUFLLFFBQVEsRUFBRTtRQUNsRCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUTtZQUN2RCxDQUFDLENBQUUsWUFBNEMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUMzRjtBQUNILENBQUM7QUFaRCw0Q0FZQztBQUVELHVCQUF1QixHQUFXO0lBQ2hDLE9BQU8sR0FBRztTQUNQLE9BQU8sQ0FBQyxVQUFVLEVBQUUsS0FBSyxDQUFDO1NBQzFCLE9BQU8sQ0FBQyxJQUFJLEVBQUUsVUFBQyxHQUFHLElBQUssT0FBQSxHQUFHLENBQUMsV0FBVyxFQUFFLEVBQWpCLENBQWlCLENBQUMsQ0FBQztBQUMvQyxDQUFDIiwiZmlsZSI6ImludGVyZmFjZXMvZm9ybS1vdmVycmlkZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIElKc29uU2NoZW1hRGVmaW5pdGlvbixcbiAgSUpzb25TY2hlbWFBcnJheURlZmluaXRpb24sXG4gIElKc29uU2NoZW1hT2JqZWN0RGVmaW5pdGlvblxufSBmcm9tIFwiLi9qc29uLXNjaGVtYS1kZWZpbml0aW9uXCI7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tIFwiYXVyZWxpYS1sb2dnaW5nXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUZvcm1PdmVycmlkZSB7XG4gIFtrZXk6IHN0cmluZ106IElGb3JtT3ZlcnJpZGVbXSB8IElGb3JtT3ZlcnJpZGUgfCBudW1iZXIgfCBib29sZWFuIHwgc3RyaW5nIHwgSUpzb25TY2hlbWFEZWZpbml0aW9uO1xuICAkbm9UaXRsZT86IGJvb2xlYW47XG4gICRhcnJheUl0ZW0/OiBJRm9ybU92ZXJyaWRlO1xuICAkYXJyYXlTdGFydEVtcHR5PzogYm9vbGVhbjtcbiAgJHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICAkaHRtbENsYXNzPzogc3RyaW5nO1xuICAkYWx0VGVtcGxhdGU/OiBzdHJpbmc7XG4gICRtaW5EYXRlPzogc3RyaW5nOyAvLyB5eXl5LU1NLWRkXG4gICRtYXhEYXRlPzogc3RyaW5nOyAvLyB5eXl5LU1NLWRkXG4gICRzY2hlbWE/OiBJSnNvblNjaGVtYURlZmluaXRpb247XG4gICRyZXF1aXJlZD86IGJvb2xlYW47XG4gICRub1NlcGFyYXRvcj86IGJvb2xlYW47XG4gICRzdGVwPzogbnVtYmVyOyAvLyByYW5nZSBzbGlkZXIgc3RlcHNcbiAgJHBhcmVudEZvcm0/OiBJRm9ybU92ZXJyaWRlO1xufVxuXG5jb25zdCBvdmVycmlkZU1hcmtlcjogc3RyaW5nID0gXCIkXCI7XG5leHBvcnQgZnVuY3Rpb24gaXNPdmVycmlkZShrZXk6IHN0cmluZykge1xuICBjb25zdCB2YWwgPSBrZXkuY2hhckF0KDApID09PSBvdmVycmlkZU1hcmtlcjtcblxuICBnZXRMb2dnZXIoXCJhdXJlbGlhLWpzb24tc2NoZW1hLWZvcm1cIilcbiAgICAuaW5mbyhcImlzT3ZlcnJpZGVcIiwgeyBrZXksIHZhbCB9KTtcbiAgcmV0dXJuIHZhbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEZvcm1PdmVycmlkZXMoXG4gIGZvcm06IElGb3JtT3ZlcnJpZGUsIHBhcmVudFNjaGVtYTogSUpzb25TY2hlbWFEZWZpbml0aW9uLCBmb3JtS2V5OiBzdHJpbmcsIHNjaGVtYTogSUpzb25TY2hlbWFEZWZpbml0aW9uXG4pIHtcbiAgZ2V0TG9nZ2VyKFwiYXVyZWxpYS1qc29uLXNjaGVtYS1mb3JtXCIpXG4gICAgLmluZm8oXCJzZXRGb3JtT3ZlcnJpZGVzXCIsIHsgZm9ybSwgcGFyZW50U2NoZW1hLCBmb3JtS2V5LCBzY2hlbWEgfSk7XG4gIHNjaGVtYS50aXRsZSA9IHNjaGVtYS50aXRsZSB8fCAoISFmb3JtS2V5ID8gZnJvbUNhbWVsQ2FzZShmb3JtS2V5KSA6IHVuZGVmaW5lZCk7XG4gIGZvcm0uJHNjaGVtYSA9IHNjaGVtYTtcblxuICBpZiAocGFyZW50U2NoZW1hICYmIHBhcmVudFNjaGVtYS50eXBlID09PSBcIm9iamVjdFwiKSB7XG4gICAgZm9ybS4kcmVxdWlyZWQgPSBmb3JtLiRyZXF1aXJlZCB8fCAocGFyZW50U2NoZW1hLnJlcXVpcmVkXG4gICAgICA/IChwYXJlbnRTY2hlbWEgYXMgSUpzb25TY2hlbWFPYmplY3REZWZpbml0aW9uKS5yZXF1aXJlZC5pbmRleE9mKGZvcm1LZXkpID4gLTEgOiBmYWxzZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZnJvbUNhbWVsQ2FzZSh2YWw6IHN0cmluZykge1xuICByZXR1cm4gdmFsXG4gICAgLnJlcGxhY2UoLyhbQS1aXSkvZywgXCIgJDFcIilcbiAgICAucmVwbGFjZSgvXi4vLCAoc3RyKSA9PiBzdHIudG9VcHBlckNhc2UoKSk7XG59XG4iXSwic291cmNlUm9vdCI6InNyYyJ9
