"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var aurelia_logging_1 = require("aurelia-logging");
var overrideMarker = "$";
function isOverride(key) {
    var val = key.charAt(0) === overrideMarker;
    aurelia_logging_1.getLogger("aurelia-json-schema-form")
        .info("isOverride", { key: key, val: val });
    return val;
}
exports.isOverride = isOverride;
function setFormOverrides(form, parentSchema, formKey, schema) {
    aurelia_logging_1.getLogger("aurelia-json-schema-form")
        .info("setFormOverrides", { form: form, parentSchema: parentSchema, formKey: formKey, schema: schema });
    schema.title = schema.title || (!!formKey ? fromCamelCase(formKey) : undefined);
    form.$schema = schema;
    if (parentSchema && parentSchema.type === "object") {
        form.$required = form.$required || (parentSchema.required
            ? parentSchema.required.indexOf(formKey) > -1 : false);
    }
}
exports.setFormOverrides = setFormOverrides;
function fromCamelCase(val) {
    return val
        .replace(/([A-Z])/g, " $1")
        .replace(/^./, function (str) { return str.toUpperCase(); });
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImludGVyZmFjZXMvZm9ybS1vdmVycmlkZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUlBLG1EQUE0QztBQXdCNUMsSUFBTSxjQUFjLEdBQVcsR0FBRyxDQUFDO0FBQ25DLG9CQUEyQixHQUFXO0lBQ3BDLElBQU0sR0FBRyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssY0FBYyxDQUFDO0lBRTdDLDJCQUFTLENBQUMsMEJBQTBCLENBQUM7U0FDbEMsSUFBSSxDQUFDLFlBQVksRUFBRSxFQUFFLEdBQUcsS0FBQSxFQUFFLEdBQUcsS0FBQSxFQUFFLENBQUMsQ0FBQztJQUNwQyxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFORCxnQ0FNQztBQUVELDBCQUNFLElBQW1CLEVBQUUsWUFBbUMsRUFBRSxPQUFlLEVBQUUsTUFBNkI7SUFFeEcsMkJBQVMsQ0FBQywwQkFBMEIsQ0FBQztTQUNsQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsRUFBRSxJQUFJLE1BQUEsRUFBRSxZQUFZLGNBQUEsRUFBRSxPQUFPLFNBQUEsRUFBRSxNQUFNLFFBQUEsRUFBRSxDQUFDLENBQUM7SUFDckUsTUFBTSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNoRixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztJQUV0QixJQUFJLFlBQVksSUFBSSxZQUFZLENBQUMsSUFBSSxLQUFLLFFBQVEsRUFBRTtRQUNsRCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUTtZQUN2RCxDQUFDLENBQUUsWUFBNEMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUMzRjtBQUNILENBQUM7QUFaRCw0Q0FZQztBQUVELHVCQUF1QixHQUFXO0lBQ2hDLE9BQU8sR0FBRztTQUNQLE9BQU8sQ0FBQyxVQUFVLEVBQUUsS0FBSyxDQUFDO1NBQzFCLE9BQU8sQ0FBQyxJQUFJLEVBQUUsVUFBQyxHQUFHLElBQUssT0FBQSxHQUFHLENBQUMsV0FBVyxFQUFFLEVBQWpCLENBQWlCLENBQUMsQ0FBQztBQUMvQyxDQUFDIiwiZmlsZSI6ImludGVyZmFjZXMvZm9ybS1vdmVycmlkZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIElKc29uU2NoZW1hRGVmaW5pdGlvbixcbiAgSUpzb25TY2hlbWFPYmplY3REZWZpbml0aW9uXG59IGZyb20gXCIuL2pzb24tc2NoZW1hLWRlZmluaXRpb25cIjtcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gXCJhdXJlbGlhLWxvZ2dpbmdcIjtcbmltcG9ydCB7IElUZW1wbGF0ZU1vZHVsZSB9IGZyb20gXCIuL3RlbXBsYXRlXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUZvcm1PdmVycmlkZSB7XG4gIFtrZXk6IHN0cmluZ106IElGb3JtT3ZlcnJpZGVbXSB8IElGb3JtT3ZlcnJpZGUgfCBudW1iZXIgfCBib29sZWFuIHwgc3RyaW5nIHwgSUpzb25TY2hlbWFEZWZpbml0aW9uIHwgSVRlbXBsYXRlTW9kdWxlO1xuICBfdGVtcGxhdGU/OiBJVGVtcGxhdGVNb2R1bGU7XG4gICRub1RpdGxlPzogYm9vbGVhbjtcbiAgJGFycmF5SXRlbT86IElGb3JtT3ZlcnJpZGU7XG4gICRub0VtcHR5QXJyYXlJbml0aWFsaXphdGlvbj86IGJvb2xlYW47XG4gICRub3RSZW1vdmFibGU/OiBib29sZWFuO1xuICAkYXJyYXlBc1RhYnM/OiBib29sZWFuO1xuICAkdGFiVGl0bGU/OiBzdHJpbmc7XG4gICRwbGFjZWhvbGRlcj86IHN0cmluZztcbiAgJGh0bWxDbGFzcz86IHN0cmluZztcbiAgJGFsdFRlbXBsYXRlPzogc3RyaW5nO1xuICAkbWluRGF0ZT86IHN0cmluZzsgLy8geXl5eS1NTS1kZFxuICAkbWF4RGF0ZT86IHN0cmluZzsgLy8geXl5eS1NTS1kZFxuICAkc2NoZW1hPzogSUpzb25TY2hlbWFEZWZpbml0aW9uO1xuICAkcmVxdWlyZWQ/OiBib29sZWFuO1xuICAkbm9TZXBhcmF0b3I/OiBib29sZWFuO1xuICAkc3RlcD86IG51bWJlcjsgLy8gcmFuZ2Ugc2xpZGVyIHN0ZXBzXG4gICRwYXJlbnRGb3JtPzogSUZvcm1PdmVycmlkZTtcbn1cblxuY29uc3Qgb3ZlcnJpZGVNYXJrZXI6IHN0cmluZyA9IFwiJFwiO1xuZXhwb3J0IGZ1bmN0aW9uIGlzT3ZlcnJpZGUoa2V5OiBzdHJpbmcpIHtcbiAgY29uc3QgdmFsID0ga2V5LmNoYXJBdCgwKSA9PT0gb3ZlcnJpZGVNYXJrZXI7XG5cbiAgZ2V0TG9nZ2VyKFwiYXVyZWxpYS1qc29uLXNjaGVtYS1mb3JtXCIpXG4gICAgLmluZm8oXCJpc092ZXJyaWRlXCIsIHsga2V5LCB2YWwgfSk7XG4gIHJldHVybiB2YWw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRGb3JtT3ZlcnJpZGVzKFxuICBmb3JtOiBJRm9ybU92ZXJyaWRlLCBwYXJlbnRTY2hlbWE6IElKc29uU2NoZW1hRGVmaW5pdGlvbiwgZm9ybUtleTogc3RyaW5nLCBzY2hlbWE6IElKc29uU2NoZW1hRGVmaW5pdGlvblxuKSB7XG4gIGdldExvZ2dlcihcImF1cmVsaWEtanNvbi1zY2hlbWEtZm9ybVwiKVxuICAgIC5pbmZvKFwic2V0Rm9ybU92ZXJyaWRlc1wiLCB7IGZvcm0sIHBhcmVudFNjaGVtYSwgZm9ybUtleSwgc2NoZW1hIH0pO1xuICBzY2hlbWEudGl0bGUgPSBzY2hlbWEudGl0bGUgfHwgKCEhZm9ybUtleSA/IGZyb21DYW1lbENhc2UoZm9ybUtleSkgOiB1bmRlZmluZWQpO1xuICBmb3JtLiRzY2hlbWEgPSBzY2hlbWE7XG5cbiAgaWYgKHBhcmVudFNjaGVtYSAmJiBwYXJlbnRTY2hlbWEudHlwZSA9PT0gXCJvYmplY3RcIikge1xuICAgIGZvcm0uJHJlcXVpcmVkID0gZm9ybS4kcmVxdWlyZWQgfHwgKHBhcmVudFNjaGVtYS5yZXF1aXJlZFxuICAgICAgPyAocGFyZW50U2NoZW1hIGFzIElKc29uU2NoZW1hT2JqZWN0RGVmaW5pdGlvbikucmVxdWlyZWQuaW5kZXhPZihmb3JtS2V5KSA+IC0xIDogZmFsc2UpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZyb21DYW1lbENhc2UodmFsOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHZhbFxuICAgIC5yZXBsYWNlKC8oW0EtWl0pL2csIFwiICQxXCIpXG4gICAgLnJlcGxhY2UoL14uLywgKHN0cikgPT4gc3RyLnRvVXBwZXJDYXNlKCkpO1xufVxuIl0sInNvdXJjZVJvb3QiOiJzcmMifQ==
