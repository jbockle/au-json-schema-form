<template>
  <require from="../styles.css"></require>
  <div class="d-inline">
    <h5 class="d-inline"
        if.bind="!form.$noArrayTitle">${schema.title}
      <small class="text-muted"
             if.bind="schema.description">${schema.description}</small>
    </h5>
    <button class="btn btn-link btn-sm"
            click.delegate="add()"
            disabled.bind="isDisabled || atCapacity">&plus; Add</button>
  </div>
  <em class="text-muted small d-block"
      if.bind="!model || model.length === 0">nothing here, click add above</em>
  <div class="text-danger">
    <ul>
      <li repeat.for="result of validationController.results"
          if.bind="result.object === model && !result.valid">
        <small>${result.message}</small>
      </li>
    </ul>
  </div>
  <div repeat.for="item of model & validateOnChangeOrBlur"
       class="border border-light p-2">
    <button type="button"
            class="close pb-1"
            bootstrap-tooltip
            data-placement="left"
            title="remove"
            click.trigger="remove($index)"
            disabled.bind="isDisabled || atMinimumCapacity">
      <span>&times;</span>
    </button>
    <div as-element="compose"
         view.bind="view"
         view-model.bind="'../../../form/array/sf-array-item'"
         model.two-way="model[$index]"
         schema.bind="schema.items"></div>
  </div>
  <hr if.bind="!form.$noSeparator">
</template>
